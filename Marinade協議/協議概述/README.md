# 協議概述

Marinade 是採用簡單的架構來開發，以促進下一個十億用戶的流動質押。 這種架構還具有在必要時易於適應並以無需許可的方式運行的好處。

我們的程式碼、我們的委託策略和我們的合約是開源的（或正在成為開源的）並且可以自由訪問。 我們所有的計算都可以在你自己的電腦上運行以驗證任何資訊。

Marinade 也是完全無需許可的，這意味著任何人都可以運行我們的機器人來使用該協議。

讓我們回顧一下我們協議的不同組件以及它們如何相互作用。

## 你可以在Marinade上做什麼?

Marinade提供不同的選擇：&#x20;

* 質押你的 SOL 並獲得 [mSOL ](mSOL代幣.md)
* 存入你的質押帳戶（如果你已經將你的 SOL 委託給驗證者）並收到 mSOL&#x20;
* 在我們的 [mSOL/SOL池](取消質押流動性池.md)中提供流動性（只接受 SOL），並賺取其他用戶使用立即取消質押時產生的費用&#x20;
* 立即（0.3% - 3% 的費用）或延遲（免費）取消你的 mSOL&#x20;
* 通過質押你的 mSOL 或 mSOL/SOL LP 賺取 MNDE。

{% hint style="info" %}
我們的 [DeFi 頁面](https://marinade.finance/app/defi)還列出了 mSOL 可用於 DeFi 的許多選項。 歡迎去查看！
{% endhint %}

### 質押 SOL

當你選擇“質押”時，這些操作會在背後發生：&#x20;

1. 你將 SOL 存入儲備帳戶&#x20;
2. Marinade 接受此金額，並相對地增加以下的質押訂單數量：&#x20;
   1. 當前epoch（epoch\_stake\_orders）&#x20;
   2. 總質押（total\_stake\_orders）&#x20;
3. Marinade 根據 mSOL/SOL 比率為用戶鑄造 mSOL。

### 存入一個現有的質押帳戶

當你選擇“存入質押帳戶”時，這些操作會在背後發生：

1. Marinade 找到委託給任何驗證者的"委託活躍信用觀察"質押帳戶&#x20;
2. Marinade 通過得到質押和撤回的權限來控制委託和完全活躍的質押帳戶
3. Marinade 接受此金額，並相對地增加以下的質押訂單數量：&#x20;
   1. 當前epoch（epoch\_stake\_orders）&#x20;
   2. 總質押（total\_stake\_orders）&#x20;
4. Marinade 根據 mSOL/SOL 比率為用戶鑄造 mSOL。

{% hint style="info" %}
為了能夠存入你的質押帳戶，你的驗證者必須有低於 30% 的佣金並且沒有拖欠。 你的質押帳戶還需要有至少 1 個 SOL 並處於活躍的，這可能需要經過幾個 epoch。
{% endhint %}

### 在取消質押流動性池中提供流動性

你只能向取消質押流動性池提供 SOL。 通過這樣做，你可以將你的 SOL 提供給想要使用“立即取消質押”功能的用戶，並且你可以獲得一部分費用作為交換。 你可以在以下頁面了解更多關於我們的取消質押流動資金池：

{% content-ref url="取消質押流動性池.md" %}
[取消質押流動性池.md](取消質押流動性池.md)
{% endcontent-ref %}

### 立即取消質押

當你選擇“立即取消質押”時，這些操作會在背後發生：&#x20;

1. 你將 mSOL 轉移到 Marinade&#x20;
2. Marinade 使用流動性池執行 mSOL → SOL 交換&#x20;
3. 你會根據 mSOL 價格和扣除的交換費用後獲得 SOL。

![Flow of 'Unstake now'.](<../../.gitbook/assets/image (1).png>)

{% hint style="info" %}
使用“立即取消質押”涉及可變費用（0.3% - 3%），具體取決於取消質押池中的可用流動性。 在目前的情況下，你的費用不應超過 0.3%。 你可以在[取消質押流動性池](取消質押流動性池.md)頁面了解更多資訊。
{% endhint %}

### 延遲取消質押

當你選擇“延遲取消質押”時，這些操作會在背後發生：

1. 你將獲得一張認領票（是在區塊鏈上發行的 NFT），其中標示了你取消質押的金額和到期時間&#x20;
2. mSOL 將被銷毀並從供應中移除&#x20;
3. 取消質押操作是由機器人啟動和執行&#x20;
4. 在適當的時候，你將能夠領取你的 SOL 並銷毀認領票作為交換。 （認領票沒有有效期限）

當金額大於流動性池的當前餘額或你不介意等待取消質押期時，需要此機制來執行取消質押操作。

**在 Epoch N 延遲取消質押的範例：**

![Marinade 一個 epoch 有 3 個時刻。 一個 epoch 的開始、epoch 本身以及 epoch 結束前的最後幾個小時。 這 3 個時刻對延遲取消質押功能有影響](<../../.gitbook/assets/image (8).png>)

以下是在 epoch N 期間使用“延遲取消質押”時可能發生的 3 種不同情況:&#x20;

* **你在 Z 期間開始取消質押**，這是 epoch N 的開始（epoch N 開始的幾分鐘）

你將在 epoch n+1 開始時收到你的 SOL。 你收到的 SOL 數量是在取消質押開始時計算的 `SOL = [待銷毀的mSOL數量][mSOL價格]`，但 **mSOL 價格可能不會更新**，因為需要運行 Marinade 機器人以在每個 epoch 開始時更新價格。

_我們建議在進入 epoch 後等待幾個小時，然後再使用“延遲取消質押”，並在 epoch 的最後 4 小時之前啟動它。_&#x20;

* **你在 A 期間開始取消質押**&#x20;

你將在 epoch n+1 開始時收到 SOL。 取消質押開始時計算的金額為 \[待銷毀的mSOL數量]\[mSOL價格]。

* **你在 B 期間開始取消質押**，這是 epoch n 的最後 4 小時&#x20;

你將在 epoch n+2 開始時收到 SOL。 取消質押開始時計算的金額為 \[待銷毀的mSOL數量]\*\[mSOL價格]。

{% hint style="info" %}
在 Solana 區塊鏈上，一個 [epoch](../../FAQ/詞匯表.md#ji-yuan) 持續大約 2 天。 你可以直接在 Marinade 上關注當前 epoch 的進度。
{% endhint %}

