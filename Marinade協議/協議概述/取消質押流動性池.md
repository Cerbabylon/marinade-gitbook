# 取消質押流動性池

## 概述

Marinade mSOL/SOL 取消質押池是一個內部 mSOL-SOL 池，該池是**故意不平衡的**，如果在**最佳狀態運行時 100% 的流動性**會是**由流動性提供者提供的 SOL 填充**。

### 沒有無常損失

由於流動性提供者只存入 SOL，Marinade 的取消質押流動性池**沒有**[無常損失](https://www.solana.news/post/cryptonomics-what-is-impermanent-loss)。 程式碼保證你將提領出與你存入金額相同或更多的 SOL（減去 Solana 的 0.00001 交易費用）。

![Marinad取消質押流動池](<../../.gitbook/assets/image (4).png>)

這個流動資金池有多種用途：&#x20;

* 為取消質押提供即時流動性&#x20;
* 配對質押和取消質押訂單（請參閱[訂單配對](取消質押流動性池.md#order-matching)）&#x20;
* 為 mSOL 清算提供價格公道、無滑點的來源。&#x20;

在達到目標流動性以支付運營成本並獎勵流動性提供者之前，該池的交換費用是線性遞減。 75% 的費用給流動性提供者，25% 給 Marinade 金庫。

{% hint style="info" %}
當前參數為：

* 最高費用：3%
* 最低費用：0.3%
* 流動性目標：100,000 SOL
{% endhint %}

![mSOL/SOL 池的費用結構。 只要在你取消質押後流動性目標還保持在同樣水平，費用將為 0.3%。](<../../.gitbook/assets/image (9).png>)

任何用戶都可以成為流動性提供者!

流動性提供者可以隨時添加或取出流動性，他們會收到一個 LP 代幣，代表他們在流動性池中的份額。 當其他用戶使用取消質押選項時，費用會添加到池中，然後添加到 LP 的價值中。

![mSOL/SOL 流動性池的組成和流動](<../../.gitbook/assets/image (5).png>)

### 範例

讓我們來看一個池的參數接近當前情況的例子：&#x20;

* 取消質押流動性：581,250 SOL&#x20;
* 你想立即取消質押的金額：90 SOL&#x20;

你的費用計算如下：

> 581,250 - 90 = 581,140
>
> 581,140 是否高於“流動性目標”？
>
> 是。 所以費用為 0.3%。
>
> 90 SOL - 0.3% = 89.73 SOL

你在交易後收到 89.73 SOL，並且你立即支付 0.27 SOL 的取消質押費用。&#x20;

現在，讓我們看一個（假設的）情況，其中池的參數非常不同：&#x20;

* 取消質押抵押流動性：100,030 SOL&#x20;
* 你想立即取消質押的數量：9030 SOL&#x20;

你的費用將按以下方式計算：

> 100,030 - 9030 = 91,000
>
> 91,000 是否高於“流動性目標”？
>
> 否。我們使用以下公式計算費用：
>
> 取消質押費用 = 最高費用 - (最高費用- 最低費用) \* 操作後剩的數量 / 流動性目標
>
> 取消質押費用 = 3 - (3 - 0.3) \* 91,000 / 100,000
>
> 取消質押費用= 3 - 2.457 = 0.543
>
> 9030 - 0.543% = 8980.9671 SOL

在這種情況下，你將立即收到 8980.9671 SOL 並支付 49.0329 SOL 的費用。

{% hint style="info" %}
如你所見，在某些情況下，“立即取消質押”會產生更多費用，因為你的提領會影響池的流動性。 在這種情況下，如果你想避免費用，請考慮使用“[延遲取消質押](./#yan-chi-qu-xiao-zhi-ya)”
{% endhint %}

### **訂單配對**

為了盡量減少不必要的操作，實現流動性池的最佳效率，Marinade 不斷調整流動性池為 100% 的 SOL。 以下是如何達成的：&#x20;

1. 一旦完成立即取消質押操作，流動性池現在包括 mSOL（由取消質押的用戶 A 發送）和原始 SOL 流動性&#x20;
2. 當觸發另一個質押操作時(用戶 B 決定質押)，mSOL 會由流動性池提供&#x20;
3. Marinade 使用 用戶 B 存入的 SOL 免費補充流動性池，以實現池調整和補滿流動性，以便立即取消質押使用。
